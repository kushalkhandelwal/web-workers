<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>worker demo</title>
</head>

<body>
    <div>
        <h1>Without workder:</h1>
        <p>When we trigger the button, the JavaScript will try to work out the 43rd Fibonacci sequence.</p>
        <p>Without workers, The UI is Blocked。</p>
    </div>
    <button style="padding: 10px; margin: 10px 0;">Get the 43rd Fibonacci</button>
    <div>
        <span>TimeStamp:</span>
        <span class="time"></span>
    </div>

    <script>
        //
        let button = document.querySelector('button');
        button.addEventListener('click', function () {
            var time = new Date();
            var result = fabonacci(43);
            alert('The result is ' + result + ', used ' + (new Date() - time) + 'ms');
        });


        // 斐波那契数列
        function fabonacci(n) {
            if (n === 0) {
                return 0;
            }
            if (n === 1) {
                return 1;
            }
            return fabonacci(n - 1) + fabonacci(n - 2);
        }


        // 计时器
        let timeDom = document.querySelector('.time');

        function updateTime() {
            timeDom.innerHTML = +new Date();
            requestAnimationFrame(updateTime);
        }

        requestAnimationFrame(updateTime);
    </script>
</body>

</html>